# Proposal: add-web-ui

## æ¦‚è¿°

åˆ›å»º Web å‰ç«¯ç•Œé¢ï¼Œæä¾›ç±»ä¼¼ Manus çš„ç”¨æˆ·ä½“éªŒï¼Œæ”¯æŒä¸ Claude Code çš„å¯è§†åŒ–äº¤äº’ã€‚

## åŠ¨æœº

CLI è™½ç„¶å¼ºå¤§ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼š
1. éæŠ€æœ¯ç”¨æˆ·éš¾ä»¥ä½¿ç”¨
2. æ— æ³•çœ‹åˆ°å¯Œåª’ä½“å†…å®¹ï¼ˆå›¾ç‰‡ã€å›¾è¡¨ï¼‰
3. æ–‡ä»¶æ“ä½œä¸ç›´è§‚
4. éš¾ä»¥æŸ¥çœ‹å†å²è®°å½•
5. æ— æ³•åä½œå’Œåˆ†äº«

Web UI å¯ä»¥æä¾›ï¼š
1. **å¯è§†åŒ–ç•Œé¢**: ç±»ä¼¼ IDE çš„ä½“éªŒ
2. **å¯Œåª’ä½“æ”¯æŒ**: å›¾ç‰‡ã€å›¾è¡¨ã€ä»£ç é«˜äº®
3. **æ–‡ä»¶ç®¡ç†**: å¯è§†åŒ–æ–‡ä»¶æµè§ˆå’Œç¼–è¾‘
4. **å†å²è®°å½•**: ä¼šè¯å†å²å’Œæœç´¢
5. **åä½œ**: åˆ†äº«å’Œå¯¼å‡ºåŠŸèƒ½

## å˜æ›´å†…å®¹

### 1. æŠ€æœ¯æ ˆé€‰æ‹©

å‚è€ƒ opcode é¡¹ç›®è®¾è®¡ï¼š

```javascript
// æŠ€æœ¯æ ˆ
- React 18+ (æˆ– Vue 3+)
- TypeScript
- Vite (æ„å»ºå·¥å…·)
- TailwindCSS (æ ·å¼)
- shadcn/ui (ç»„ä»¶åº“)
- Monaco Editor (ä»£ç ç¼–è¾‘)
- WebSocket (å®æ—¶é€šä¿¡)
```

### 2. æ ¸å¿ƒåŠŸèƒ½

#### èŠå¤©ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– ccc Web UI                    [Settings] [Profile]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Chat History                                              â”‚
â”‚  â”œâ”€ Fix authentication bug                    [Today]     â”‚
â”‚  â”œâ”€ Add user profile feature                 [Yesterday] â”‚
â”‚  â””â”€ Optimize database queries                  [2d ago]   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ§‘â€ğŸ’š You: Fix the auth bug in login.ts              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¤– Agent: I'll help you fix the authentication... â”‚   â”‚
â”‚  â”‚                                               â”‚   â”‚
â”‚  â”‚ Let me first read the login.ts file to understandâ”‚   â”‚
â”‚  â”‚ the current implementation...                 â”‚   â”‚
â”‚  â”‚                                               â”‚   â”‚
â”‚  â”‚ [Tool Used] Read: login.ts                     â”‚   â”‚
â”‚  â”‚                                               â”‚   â”‚
â”‚  â”‚ I can see the issue. The token validation is  â”‚   â”‚
â”‚  â”‚ checking the wrong field. Let me fix it...     â”‚   â”‚
â”‚  â”‚                                               â”‚   â”‚
â”‚  â”‚ [Tool Used] Edit: login.ts                     â”‚   â”‚
â”‚  â”‚                                               â”‚   â”‚
â”‚  â”‚ âœ… Fixed! The validation now checks 'email'   â”‚   â”‚
â”‚  â”‚ instead of 'username'.                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  [Input box...................................] [Send]      â”‚
â”‚  [Attach] [Toolsâ–¼] [Provider: Kimiâ–¼]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŠŸèƒ½æ¨¡å—

**1. èŠå¤©æ¨¡å—**
- æ¶ˆæ¯åˆ—è¡¨æ˜¾ç¤º
- æµå¼è¾“å‡ºæ”¯æŒ
- ä»£ç è¯­æ³•é«˜äº®
- å›¾ç‰‡é¢„è§ˆ
- å·¥å…·è°ƒç”¨æ˜¾ç¤º

**2. æ–‡ä»¶æµè§ˆå™¨**
- æ–‡ä»¶æ ‘è§†å›¾
- æ–‡ä»¶å†…å®¹é¢„è§ˆ
- å¿«é€Ÿæœç´¢
- æœ€è¿‘æ‰“å¼€

**3. ä¼šè¯ç®¡ç†**
- ä¼šè¯åˆ—è¡¨
- ä¼šè¯æœç´¢
- ä¼šè¯å¯¼å‡º
- ä¼šè¯åˆ†äº«

**4. æä¾›å•†åˆ‡æ¢**
- æä¾›å•†çŠ¶æ€
- å¿«é€Ÿåˆ‡æ¢
- é…ç½®éªŒè¯

**5. è®¾ç½®**
- ä¸ªäººé…ç½®
- æä¾›å•†ç®¡ç†
- æ˜¾ç¤ºè®¾ç½®
- é”®ç›˜å¿«æ·é”®

### 3. å®æ—¶é€šä¿¡

é€šè¿‡ WebSocket ä¸åç«¯é€šä¿¡ï¼š

```typescript
// å‰ç«¯æ¶ˆæ¯æ ¼å¼
interface ClientMessage {
  type: 'input' | 'interrupt' | 'config';
  data: any;
}

// åç«¯æ¶ˆæ¯æ ¼å¼
interface ServerMessage {
  type: 'content' | 'tool_use' | 'tool_result' | 'error' | 'status';
  data: any;
  timestamp: string;
}
```

### 4. ç»„ä»¶æ¶æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Chat/
â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx
â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx
â”‚   â”‚   â””â”€â”€ ChatHistory.tsx
â”‚   â”œâ”€â”€ Editor/
â”‚   â”‚   â”œâ”€â”€ CodeBlock.tsx
â”‚   â”‚   â”œâ”€â”€ FileViewer.tsx
â”‚   â”‚   â””â”€â”€ MonacoEditor.tsx
â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â””â”€â”€ Main.tsx
â”‚   â””â”€â”€ Settings/
â”‚       â”œâ”€â”€ ProviderConfig.tsx
â”‚       â””â”€â”€ UserProfile.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚   â”œâ”€â”€ useSessions.ts
â”‚   â””â”€â”€ useConfig.ts
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ websocket.ts
â”‚   â””â”€â”€ types.ts
â””â”€â”€ styles/
    â””â”€â”€ main.css
```

### 5. å“åº”å¼è®¾è®¡

- æ¡Œé¢ç«¯ï¼šå®Œæ•´åŠŸèƒ½
- å¹³æ¿ï¼šä¼˜åŒ–çš„å¸ƒå±€
- ç§»åŠ¨ç«¯ï¼šç²¾ç®€åŠŸèƒ½

## æŠ€æœ¯å®ç°

### æ„å»ºé…ç½®

```javascript
// vite.config.ts
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': 'http://localhost:8080',
      '/ws': {
        target: 'ws://localhost:8080',
        ws: true,
      },
    },
  },
});
```

### WebSocket é›†æˆ

```typescript
// hooks/useWebSocket.ts
export function useWebSocket(url: string) {
  const [connected, setConnected] = useState(false);
  const [messages, setMessages] = useState<ServerMessage[]>([]);

  useEffect(() => {
    const ws = new WebSocket(url);

    ws.onopen = () => setConnected(true);
    ws.onmessage = (e) => {
      const msg = JSON.parse(e.data) as ServerMessage;
      setMessages((prev) => [...prev, msg]);
    };
    ws.onclose = () => setConnected(false);

    return () => ws.close();
  }, [url]);

  return { connected, messages, send: (data) => ws.send(JSON.stringify(data)) };
}
```

## éƒ¨ç½²æ–¹å¼

### å¼€å‘æ¨¡å¼

```bash
cd web
npm install
npm run dev
```

### ç”Ÿäº§æ¨¡å¼

```bash
npm run build
# é™æ€æ–‡ä»¶ç”± ccc serve æä¾›æœåŠ¡
```

## é£é™©

| é£é™© | å½±å“ | ç¼“è§£ |
|------|------|------|
| WebSocket ç¨³å®šæ€§ | ä¸­ | æ–­çº¿é‡è¿æœºåˆ¶ |
| æ€§èƒ½é—®é¢˜ | ä¸­ | è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ– |
| æµè§ˆå™¨å…¼å®¹æ€§ | ä½ | ç°ä»£æµè§ˆå™¨æ”¯æŒ |
| å¼€å‘å¤æ‚åº¦ | é«˜ | ä½¿ç”¨æˆç†Ÿç»„ä»¶åº“ |

## å‚è€ƒé¡¹ç›®

- [Manus](https://manus.im) - ç½‘é¡µç‰ˆ AI ç¼–ç¨‹åŠ©æ‰‹
- [opcode](https://github.com/winfunc/opcode) - ç•Œé¢è®¾è®¡å‚è€ƒ
- [Claude Code](https://claude.ai/code) - å®˜æ–¹ Web ç‰ˆæœ¬

## å¼€æ”¾é—®é¢˜

1. æ˜¯å¦éœ€è¦æ”¯æŒå¤šæ ‡ç­¾é¡µï¼Ÿ
2. æ˜¯å¦éœ€è¦æ”¯æŒæš—è‰²æ¨¡å¼ï¼Ÿ
3. æ˜¯å¦éœ€è¦æ”¯æŒå¿«æ·é”®ï¼Ÿ
4. æ˜¯å¦éœ€è¦æ”¯æŒä»£ç æ‰§è¡Œé¢„è§ˆï¼Ÿ
